<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="adminfaq">
    <select id="getFaqList" resultType="faqVo">
        SELECT 
            F.NO,
            C.NAME AS CATEGORYNAME,
            F.TITLE,
            F.CONTENT,
            F.ENROLL_DATE,
            A.NAME AS WRITERNAME
        FROM FAQ F
        JOIN FAQ_CATEGORY C ON (F.CATEGORY_NO = C.NO)
        JOIN ADMIN A ON (F.WRITER_NO = A.NO)
        
    </select>
    
    <insert id="faqwrite">
        INSERT INTO FAQ
			(
			    NO
			    ,TITLE
			    ,CONTENT
			    ,WRITER_NO
			    ,CATEGORY_NO
			)
			VALUES
			(
			    SEQ_FAQ_NO.NEXTVAL
			    ,#{title}
			    ,#{content}
			    ,#{writeNo}
			    ,#{categoryNo}
			
			)
    </insert>
    
   
    <select id="getFaq" resultType="faqVo">
        SELECT 
		    NO
		    ,TITLE
		    ,CONTENT
		    ,CATEGORY_NO
		    ,ENROLL_DATE
		    
		FROM FAQ
		WHERE NO = #{no}
		
    </select>
    
    <update id="faqedit">
        UPDATE FAQ
        	SET
	        	TITLE = #{title},
	            CONTENT = #{content},
	            DEL_YN = #{delYn}
        WHERE NO = #{no}
        AND WRITE_NO = #{writerNo}
    </update>

    <delete id="faqdelete">
        UPDATE FAQ
        	SET
	        	TITLE = #{title},
	            CONTENT = #{content},
	            DEL_YN = #{delYn}
        WHERE NO = #{no}
        AND WRITE_NO = #{writerNo}
       
    </delete>
    
    <select id="getCnt" resultType="int">
		SELECT COUNT(NO)
		FROM FAQ F
		
		<if test="searchType == 'title'">
			AND F.TITLE LIKE '%${searchValue}%'
		</if>
		<if test="searchType == 'content'">
			AND F.CONTENT LIKE '%${searchValue}%'
		</if>
		<if test="searchType == 'category'">
			AND F.CATEGORY_NO = #{searchValue}
		</if>
	</select>
	
</mapper>
